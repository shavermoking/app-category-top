# App Category Top


Это Laravel-приложение позволяет загружать данные о позициях приложений из внешнего API, сохранять их в базу данных SQLite и предоставлять их через REST API.

## Функционал
### Загрузка данных:
Данные о позициях приложений загружаются из внешнего API за последний месяц.
Загружаются только минимальные значения позиций для каждой категории.
REST API :
Endpoint /appTopCategory предоставляет данные о позициях приложений для указанной даты.
Поддерживается ограничение на количество запросов (5 запросов в минуту с одного IP-адреса).
Все запросы логируются.
Автоматическая настройка :
Проект можно настроить одной командой: создание базы данных, выполнение миграций и загрузка данных.

### Установка
1. Склонируйте репозиторий

```bash
   git clone git@github.com:shavermoking/app-category-top.git
   cd app-category-top
```

2. Установите зависимости

```bash
   composer install
```
3. Настройте окружение

```bash
  cp .env.example .env
```

Сгенерируйте ключ приложения:

```bash
  php artisan key:generate
```

4. Запустите команду для настройки проекта

```bash
   php artisan setup:project
```

Создаст файл базы данных, если его нет.
Выполнит миграции.
Загрузит данные из внешнего API за последний месяц.

6. Запустите локальный сервер

```bash
   php artisan serve
```

## Использование

1. Получение данных через API


   Отправьте GET-запрос на endpoint /appTopCategory с параметром date:


`GET http://localhost:8000/appTopCategory?date=2025-02-16`

Пример ответа:

```json
{
    "status_code": 200,
    "message": "ok",
    "data": {
        "2": 32,
        "23": 1
    } 
}
```
{

2. Ограничение запросов


   На endpoint /appTopCategory установлено ограничение: не более 5 запросов в минуту с одного IP-адреса. При превышении лимита возвращается ошибка:

```json
{
    "status_code": 429,
    "message": "You have exceeded the maximum number of requests per minute.",
    "data": []
}
```

3. Логирование запросов
   Все запросы на endpoint /appTopCategory логируются. Логи можно найти в файле `storage/logs/laravel.log`
